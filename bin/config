#!/bin/bash

# Service
TOPIC_NAME="my-iot-events"
DATASET_NAME="pump"
TABLE_NAME="events"
SERVICE_REGION="us-central1"
SERVICE_IMAGE_VERSION="0.2.3"
PUMP_MAX_STALL=15
PUMP_MAX_DURATION=900
PUMP_BATCH_SIZE=100
# Both topic max age and length are eval as OR
TOPIC_MAX_MESSAGE_COUNT=100
TOPIC_MAX_MESSAGE_AGE=180 # 3 min in seconds, must be > 60
# NOTIF_TOKEN=

# Derived values, don't change
SUBSCRIPTION_NAME="${TOPIC_NAME}-pump"
SERVICE_NAME="${SUBSCRIPTION_NAME}"
SA_NAME="${SUBSCRIPTION_NAME}"

PROJECT=$(gcloud config get-value project)
PROJECT_NUM=$(gcloud projects describe ${PROJECT} \
    --format="value(projectNumber)")